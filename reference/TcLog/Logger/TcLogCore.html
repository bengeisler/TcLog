<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>TcLogCore | html </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="TcLogCore | html ">
    <meta name="generator" content="docfx 2.58.9.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <link rel="stylesheet" href="../../../styles/highlight-default.css">
    <link rel="stylesheet" href="../../../styles/featherlight.min.css" type="text/css">
    <meta property="docfx:navrel" content="../../../toc">
    <meta property="docfx:tocrel" content="../../toc">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                
                <ul class="nav level1 navbar-nav">
                      <li>
                          <a href="../../../userguide/installation.html" title="User guide">User guide</a>
                      </li>
                      <li>
                          <a href="../../../reference/TcLog/Constants.html" title="API Reference">API Reference</a>
                      </li>
                </ul>    </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidefilter">
                <form class="toc-filter">
                  <span class="glyphicon glyphicon-filter filter-icon"></span>
                  <input type="text" id="toc_filter_input" placeholder="Enter here to filter..." onkeypress="if(event.keyCode==13) {return false;}">
                </form>
              </div>
              <div class="sidetoc">
                <div class="toc" id="toc">
                  
                  <ul class="nav level1">
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">TcLog</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Constants</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../TcLog/Constants.html" title="Constants" class="">Constants</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Logger</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../TcLog/Logger/TcLog.html" title="TcLog" class="">TcLog</a>
                                </li>
                                <li class="active">
                                  <a href="../../TcLog/Logger/TcLogCore.html" title="TcLogCore" class="active">TcLogCore</a>
                                </li>
                                <li class="">
                                  <a href="../../TcLog/Logger/TcLogTrig.html" title="TcLogTrig" class="">TcLogTrig</a>
                                </li>
                                <li class="">
                                  <a href="../../TcLog/Logger/_DataTypes/ErrorCodes.html" title="ErrorCodes" class="">ErrorCodes</a>
                                </li>
                                <li class="">
                                  <a href="../../TcLog/Logger/_DataTypes/LogLevels.html" title="LogLevels" class="">LogLevels</a>
                                </li>
                                <li class="">
                                  <a href="../../TcLog/Logger/_DataTypes/RollingIntervals.html" title="RollingIntervals" class="">RollingIntervals</a>
                                </li>
                                <li class="">
                                  <a href="../../TcLog/Logger/_DataTypes/Error.html" title="Error" class="">Error</a>
                                </li>
                                <li class="">
                                  <a href="../../TcLog/Logger/_DataTypes/LoggingConfiguration.html" title="LoggingConfiguration" class="">LoggingConfiguration</a>
                                </li>
                                <li class="">
                                  <a href="../../TcLog/Logger/_Interfaces/ILog.html" title="ILog" class="">ILog</a>
                                </li>
                                <li class="">
                                  <a href="../../TcLog/Logger/_Interfaces/ILogCore.html" title="ILogCore" class="">ILogCore</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Utils</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../TcLog/Utils/AnyToString.html" title="AnyToString" class="">AnyToString</a>
                                </li>
                                <li class="">
                                  <a href="../../TcLog/Utils/DateTime.html" title="DateTime" class="">DateTime</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Version</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../TcLog/Version/Global_Version.html" title="Global_Version" class="">Global_Version</a>
                                </li>
                              </ul>  </li>
                        </ul>  </li>
                  </ul>        </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="TcLog.TcLogCore">
<h1 id="tclogcore">TcLogCore</h1>

<div class="implements"><h5>Implements</h5>
<div><a class="xref" href="_Interfaces/ILogCore.html">TcLog.ILogCore</a></div>
</div>
<h6><strong>Namespace</strong>: <a class="xref" href="TcLogCore.html">TcLog</a></h6>
<h5 class="decalaration">Declaration</h5>
<pre><code class="lang-st">{attribute 'hide_all_locals'}
FUNCTION_BLOCK TcLogCore IMPLEMENTS TcLog.ILogCore
</code></pre>
<p><code>TcLogCore</code> provides the base functionality of the logger and sets the configuration.
The logger can be configured by calling its methods that set the configuration.</p>
<div class="NOTE">
<h5>Note</h5>
<p><code>TcLogCore.RunLogger()</code> should be called once each cycle. The configuration methods should be called <strong>before</strong>
<code>RunLogger</code> is called.</p>
</div>
<p>When declaring an instance of TcLogCore, the ininital buffer size has to be set. If the buffer size is set too low, it will expand
automatically if enough memory is available.</p>
<p>To set the inital buffer size to accomodate 100 messages, use it like this:</p>
<pre><code class="lang-st">VAR
  myLogger: TcLogCore(BufferSize := 100 * (Tc2_System.Tc2_System.MAX_STRING_LENGTH * Constants.FifoOverhead));
END_VAR
</code></pre>
<h3 id="constructors">Constructor</h3>
<p><a name="FB_init"></a></p>
<h4 id="TcLog.TcLogCore.FB_init" data-uid="TcLog.TcLogCore.FB_init">FB_init</h4>
<h5 class="decalaration">Declaration</h5>
<pre><code class="lang-st">METHOD FB_init (
 bInitRetains : BOOL,
 bInCopyCode : BOOL,
 bufferSize : DINT) : BOOL
</code></pre>
<h5 class="parameters">Inputs</h5>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><a name="bInitRetains"></a>bInitRetains</td>
<td style="text-align: left;">BOOL</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;"><a name="bInCopyCode"></a>bInCopyCode</td>
<td style="text-align: left;">BOOL</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;"><a name="bufferSize"></a>bufferSize</td>
<td style="text-align: left;">DINT</td>
<td style="text-align: left;">Initial buffer size for the internal log message buffer</td>
</tr>
</tbody>
</table>
<h3 id="properties">Properties</h3>
<p><a name="Busy"></a></p>
<h4 id="TcLog.TcLogCore.Busy" data-uid="TcLog.TcLogCore.Busy">Busy</h4>
<h5 class="decalaration">Declaration</h5>
<pre><code class="lang-st">{attribute 'monitoring':='call'}
PROPERTY Busy : BOOL
</code></pre>
<p><code>Busy</code> evaluates to <code>TRUE</code> as long as the log file is kept open to append new log messages
or there are pending messages in the queue to be written to the logfile.</p>
<p><a name="Configuration"></a></p>
<h4 id="TcLog.TcLogCore.Configuration" data-uid="TcLog.TcLogCore.Configuration">Configuration</h4>
<h5 class="decalaration">Declaration</h5>
<pre><code class="lang-st">{attribute 'monitoring':='variable'}
PROPERTY Configuration : LoggingConfiguration
</code></pre>
<p>Returns the current configuration of the logger.</p>
<p><a name="Error"></a></p>
<h4 id="TcLog.TcLogCore.Error" data-uid="TcLog.TcLogCore.Error">Error</h4>
<h5 class="decalaration">Declaration</h5>
<pre><code class="lang-st">{attribute 'monitoring':='call'}
PROPERTY Error : REFERENCE TO Error
</code></pre>
<p>Returns information about internal errors.</p>
<h3 id="methods">Methods</h3>
<p><a name="DeleteLogFilesAfterDays"></a></p>
<h4 id="TcLog.TcLogCore.DeleteLogFilesAfterDays" data-uid="TcLog.TcLogCore.DeleteLogFilesAfterDays">DeleteLogFilesAfterDays</h4>
<p>Configuration method which sets the lifespan of log files. Once exceeded, they will be deleted.</p>
<h5 class="decalaration">Declaration</h5>
<pre><code class="lang-st">METHOD DeleteLogFilesAfterDays (
 lifespan : UINT) : REFERENCE TO TcLogCore
</code></pre>
<h5 class="parameters">Inputs</h5>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><a name="lifespan"></a>lifespan</td>
<td style="text-align: left;">UINT</td>
<td style="text-align: left;">Lifespan of logfiles in days.</td>
</tr>
</tbody>
</table>
<p><a name="FlushCache"></a></p>
<h4 id="TcLog.TcLogCore.FlushCache" data-uid="TcLog.TcLogCore.FlushCache">FlushCache</h4>
<p>Flushes the logging cache. All messages that have not yet been processed will be lost.</p>
<h5 class="decalaration">Declaration</h5>
<pre><code class="lang-st">METHOD FlushCache () : BOOL
</code></pre>
<p><a name="IncludeInstancePath"></a></p>
<h4 id="TcLog.TcLogCore.IncludeInstancePath" data-uid="TcLog.TcLogCore.IncludeInstancePath">IncludeInstancePath</h4>
<p>Configuration method. If this method is called, the instance path where the log
messages has been triggered will be included in the log message.</p>
<h5 class="decalaration">Declaration</h5>
<pre><code class="lang-st">METHOD IncludeInstancePath () : REFERENCE TO TcLogCore
</code></pre>
<p><a name="LogCustomFormat"></a></p>
<h4 id="TcLog.TcLogCore.LogCustomFormat" data-uid="TcLog.TcLogCore.LogCustomFormat">LogCustomFormat</h4>
<p>Logger method. It should only be called from within objects that implement <code>ILog</code>.
Logs data in custom format. No additional formatting will be done.</p>
<h5 class="decalaration">Declaration</h5>
<pre><code class="lang-st">METHOD LogCustomFormat (
 data : Tc2_System.T_MaxString) : BOOL
</code></pre>
<h5 class="parameters">Inputs</h5>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><a name="data"></a>data</td>
<td style="text-align: left;">Tc2_System.T_MaxString</td>
<td style="text-align: left;">Data to be logged.</td>
</tr>
</tbody>
</table>
<p><a name="LogStandardFormat"></a></p>
<h4 id="TcLog.TcLogCore.LogStandardFormat" data-uid="TcLog.TcLogCore.LogStandardFormat">LogStandardFormat</h4>
<p>Logger method. It should only be called from within objects that implement <code>ILog</code>.
Logs in the standard format. This includes</p>
<ul>
<li>timestamp</li>
<li>log level</li>
<li>log message</li>
<li>instance path of logging source (optional)
The message will only be logged if the logging level exceeds the configured minimum logging level.</li>
</ul>
<h5 class="decalaration">Declaration</h5>
<pre><code class="lang-st">METHOD LogStandardFormat (
 data : Tc2_System.T_MaxString,
 instancePath : Tc2_System.T_MaxString,
 logLevel : LogLevels) : BOOL
</code></pre>
<h5 class="parameters">Inputs</h5>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><a name="data"></a>data</td>
<td style="text-align: left;">Tc2_System.T_MaxString</td>
<td style="text-align: left;">Data to be logged.</td>
</tr>
<tr>
<td style="text-align: left;"><a name="instancePath"></a>instancePath</td>
<td style="text-align: left;">Tc2_System.T_MaxString</td>
<td style="text-align: left;">Instance path of calling logger to locate source of logging message.</td>
</tr>
<tr>
<td style="text-align: left;"><a name="logLevel"></a>logLevel</td>
<td style="text-align: left;"><a class="xref" href="_DataTypes/LogLevels.html">TcLog.LogLevels</a></td>
<td style="text-align: left;">Log level of message.</td>
</tr>
</tbody>
</table>
<p><a name="MinimumLevel"></a></p>
<h4 id="TcLog.TcLogCore.MinimumLevel" data-uid="TcLog.TcLogCore.MinimumLevel">MinimumLevel</h4>
<p>Configuration method.
Sets the minimum log level. Log messages below this level
will not be logged.</p>
<h5 class="decalaration">Declaration</h5>
<pre><code class="lang-st">METHOD MinimumLevel (
 level : LogLevels) : REFERENCE TO TcLogCore
</code></pre>
<h5 class="parameters">Inputs</h5>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><a name="level"></a>level</td>
<td style="text-align: left;"><a class="xref" href="_DataTypes/LogLevels.html">TcLog.LogLevels</a></td>
<td style="text-align: left;">Minimum log level to be logged.</td>
</tr>
</tbody>
</table>
<p><a name="RunLogger"></a></p>
<h4 id="TcLog.TcLogCore.RunLogger" data-uid="TcLog.TcLogCore.RunLogger">RunLogger</h4>
<p>Cyclic method of Logger.
This method has to be executed in every plc cycle and runs
all internal methods that have to be executed cyclically.</p>
<div class="NOTE">
<h5>Note</h5>
<p>This method should be the last method of <code>TcLogCore</code> to be called in each cycle.</p>
</div>
<h5 class="decalaration">Declaration</h5>
<pre><code class="lang-st">{attribute 'hide_all_locals'}
METHOD RunLogger () : BOOL
</code></pre>
<p><a name="SetDelimiter"></a></p>
<h4 id="TcLog.TcLogCore.SetDelimiter" data-uid="TcLog.TcLogCore.SetDelimiter">SetDelimiter</h4>
<p>Configuration method
Sets delimiter between different columns of log file.</p>
<h5 class="decalaration">Declaration</h5>
<pre><code class="lang-st">METHOD SetDelimiter (
 delimiter : STRING(1)) : REFERENCE TO TcLogCore
</code></pre>
<h5 class="parameters">Inputs</h5>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><a name="delimiter"></a>delimiter</td>
<td style="text-align: left;">STRING(1)</td>
<td style="text-align: left;">Delimiter between different columns of log file.</td>
</tr>
</tbody>
</table>
<p><a name="SetRollingInterval"></a></p>
<h4 id="TcLog.TcLogCore.SetRollingInterval" data-uid="TcLog.TcLogCore.SetRollingInterval">SetRollingInterval</h4>
<p>Configuration method.
Sets the rolling interval of the log file. Once the rolling interval
expires, a file name with a new timestamp will be generated.</p>
<h5 class="decalaration">Declaration</h5>
<pre><code class="lang-st">METHOD SetRollingInterval (
 interval : RollingIntervals) : REFERENCE TO TcLogCore
</code></pre>
<h5 class="parameters">Inputs</h5>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><a name="interval"></a>interval</td>
<td style="text-align: left;"><a class="xref" href="_DataTypes/RollingIntervals.html">TcLog.RollingIntervals</a></td>
<td style="text-align: left;">Rolling interval for log file. Once exceeded, a new log file will be created.</td>
</tr>
</tbody>
</table>
<p><a name="TimestampFormat"></a></p>
<h4 id="TcLog.TcLogCore.TimestampFormat" data-uid="TcLog.TcLogCore.TimestampFormat">TimestampFormat</h4>
<p>Configuration method.
Sets the format of the timestamp in the file name.</p>
<p>The following format options are available:
Y : year
M : month
D : day
h : hour
m : minute
s : second
i : millisecond</p>
<p>Example: <em>YYMMDD-hh:mm:ss:iii</em>
=&gt; <em>20210812-12:30:22:123</em></p>
<h5 class="decalaration">Declaration</h5>
<pre><code class="lang-st">METHOD TimestampFormat (
 format : STRING) : REFERENCE TO TcLogCore
</code></pre>
<h5 class="parameters">Inputs</h5>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><a name="format"></a>format</td>
<td style="text-align: left;">STRING</td>
<td style="text-align: left;">Format the timestamp should have.</td>
</tr>
</tbody>
</table>
<p><a name="WriteToAds"></a></p>
<h4 id="TcLog.TcLogCore.WriteToAds" data-uid="TcLog.TcLogCore.WriteToAds">WriteToAds</h4>
<p>Configuration method.
If this method is called, the logs will be written to ADS.</p>
<h5 class="decalaration">Declaration</h5>
<pre><code class="lang-st">METHOD WriteToAds () : REFERENCE TO TcLogCore
</code></pre>
<p><a name="WriteToFile"></a></p>
<h4 id="TcLog.TcLogCore.WriteToFile" data-uid="TcLog.TcLogCore.WriteToFile">WriteToFile</h4>
<p>Configuration method.
If this method is called, the logs will be persisted to the file system.</p>
<h5 class="decalaration">Declaration</h5>
<pre><code class="lang-st">METHOD WriteToFile (
 path : Tc2_System.T_MaxString,
 fileName : STRING) : REFERENCE TO TcLogCore
</code></pre>
<h5 class="parameters">Inputs</h5>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><a name="path"></a>path</td>
<td style="text-align: left;">Tc2_System.T_MaxString</td>
<td style="text-align: left;">File path the logs will be written to.</td>
</tr>
<tr>
<td style="text-align: left;"><a name="fileName"></a>fileName</td>
<td style="text-align: left;">STRING</td>
<td style="text-align: left;">File name of the log file. Will automatically be prefixed by timestamp.</td>
</tr>
</tbody>
</table>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            Documentation powered by <a href="https://github.com/Zeugwerk/zkdoc-action">zkdoc</a>
            
          </div>
        </div>
      </footer>
    </div>
          
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
    
    <!-- mermaid & featherlight & highlight support -->
    <script type="text/javascript" src="../../../styles/mermaid.min.js"></script>
    <script type="text/javascript" src="../../../styles/highlight.pack.js"></script>
    <script type="text/javascript" src="../../../styles/highlight-iecst.min.js"></script>
    <script type="text/javascript" src="../../../styles/jquery-latest.js"></script>
    <script type="text/javascript" src="../../../styles/featherlight.min.js" charset="utf-8"></script>
    <script>    
        mermaid.initialize({
            startOnLoad:false,
            flowchart:{
                useMaxWidth:true,
                htmlLabels:true
            },
            sequence:{
                useMaxWidth:true
            },        
        });
    
        $(document).ready(function() {
            hljs.highlightAll(); 
        
            const elements = document.getElementsByClassName("lang-mermaid");
            let index = 0;
    
            while (elements.length != 0) {
                let element = elements[0];
                mermaid.render('graph'+index, element.innerText, (svgGraph) => {                    
                    element.parentElement.outerHTML = "<div class='mermaid'>" + svgGraph + "</div>";
                });
                $('#graph'+index).height("100%");
                ++index;
            }
    
            // featherlight initialization
            // find all images, but not the logo, and add the lightbox
            $('.gallery img').each(function(){
                var $img = $(this);
                var filename = $img.attr('src')
                //add cursor
                $img.css('cursor','zoom-in');
                $img.css('cursor','-moz-zoom-in');
                $img.css('cursor','-webkit-zoom-in');
    
                //add featherlight
                $img.attr('alt', filename);
                $img.featherlight(filename);
            });
        });
    </script>
    
  </body>
</html>
